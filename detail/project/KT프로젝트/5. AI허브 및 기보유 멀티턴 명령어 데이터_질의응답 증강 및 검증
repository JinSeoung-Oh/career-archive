다중 턴 QA 데이터 증강 및 품질 관리 (KT, 2024.08–09)

1. 개요
   본 프로젝트는 단일 시드 데이터(1턴 질의응답)를 기반으로, 이어지는 4턴의 질의응답을 증강하여 총 5턴 세션을 구축하는 것을 목표로 했다. 
   단순한 질문·답변 생성이 아닌, 다양한 QA 유형 정의, 맥락적 연결성, 필터링·품질 관리까지 포함하는 대규모 데이터 구축 작업이었다.

2. 진행 과정
   -1. 기본 설계
       -1) 세션 단위 구성: 1개의 시드 턴 + 4개의 증강 턴으로 총 5턴을 완성.
       -2) 분량 규정: 세션당 평균 2,000자 이상, 문서 성격에 따라 조정.
       -3) 질문 유형 정의
           - 일반 QA: 단순 정보 검색으로 답할 수 있는 질문
           - 숫자추론 QA: 수치 기반 계산/추론이 필요한 질문
           - 창작(변환): 기존 발화를 바탕으로 요약·서술 방식 변형
           - 창작(추천): 개인화 시나리오 기반 추천 요청
           - 추론: 대화 히스토리 내 정보만으로 논리적 추론 요구
       → 단일 세션에 최소 2종 이상의 질문 유형이 포함되도록 설계하여 질문 다양성을 보장.
   -2. 대화 맥락 연결성 강화
       -1) 접속사·대명사 활용 규칙 추가(8/29) → 질문을 단독으로 떼어 놓으면 어색해야 함.
       -2) 참조 턴 정의: 직전 턴이 아닌 과거 턴을 기반으로 질문을 생성하도록 제약.
       -3) 전체 48,000턴 중 최소 10%는 복수 참조 턴을 이용하도록 구성.
   -3. 필터링 및 품질 관리
       -1) 시드 데이터 필터링
           - 질문과 답변이 동시에 포함된 케이스 제거.
           - 질문 없이 답변만 있는 경우, 불완전한 QA 케이스 제거.
           - 비문(주어/술어 불일치, 문맥 불자연스러움) 제거.
      -2) 할루시네이션 검증(9/12) → 사실 오류가 있는 시드는 제거.
          -1. 단, 고객사 협의 결과(9/26) 검증은 중단하되 라벨 데이터로 별도 관리.
      -3) 편향 제어 검토
          -1. 직업 관련 질문에서 IT 직군 과다 → 편향 우려 확인, 단 제거 불가 판정.
          -2. “어린아이에게 설명” 패턴 과잉 → 제거 요청 불가, 데이터 다양성으로 인정.
  -4. 운영 개선 및 협의 내역
      -1) 모델 변경: 초기에 ChatGPT 기반, 이후 품질 및 비용 문제로 Claude로 전환(8/30).
      -2) 세션 설계 수정: 초기에는 multi-hop만 고려했으나, 고객사 요청으로 다양한 유형 혼합 및 제어 필요.
      -3) API 비용 재산정: context 당 8,000~10,000음절 → 5,000음절로 재협의.
      -4) 라벨 데이터 제공: 이미 필터링된 결과를 고객사에 제공, 협의 근거 자료로 활용.

3. 성과
   -1. 48,000턴 규모 다중 턴 QA 증강 데이터 구축.
   -2. 질문 유형·참조 턴·대화 연결성에 대한 구체적 설계 기준 수립.
   -3. 고객사와의 협의 과정에서 데이터 편향·할루시네이션 관리에 대한 현실적 제약과 해결 방안을 제시.
   -4. ChatGPT/Claude 등 모델 성능 차이를 직접 검증하며 품질·비용 최적화 전략을 수립.

4. 한계 및 개선점
   -1. “개인화 추천”의 정의가 모호해 일관된 라벨링에 어려움이 있었음.
   -2. 할루시네이션 검증은 리소스 한계로 중단되었고, 라벨 데이터 제공으로 대체함.
   -3. 특정 유형(어린이 설명, IT 직군 편향)의 과잉 문제는 제거 불가로 결론, 향후 자동 편향 제어 연구 필요.

QA 유형 제어 로직에도 불구하고, multi-hop 외 유형 혼입 가능성을 완전히 제거하지 못함.
