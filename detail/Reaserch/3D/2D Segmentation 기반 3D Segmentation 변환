1. ì—°êµ¬ ëª©ì 
   - 2D segmentation(SAM model)ì˜ ê²°ê³¼ë¥¼ 3D segmentationìœ¼ë¡œ í™•ì¥í•˜ì—¬, ë‹¨ì¼ ë·° í˜¹ì€ ë‹¤ì¤‘ ë·° RGB ì´ë¯¸ì§€ë¡œë¶€í„° 3D panoptic labeling ìˆ˜í–‰ ê°€ëŠ¥ì„±ì„ ê²€ì¦.

2. ì—°êµ¬ ì ‘ê·¼
   - 2D ê²°ê³¼ ì²˜ë¦¬
     SAM ëª¨ë¸ ì¶œë ¥ â†’ classë³„ color label ë§¤ì¹­
     {2D pixel coordinate â€“ color label} í˜•ì‹ìœ¼ë¡œ ì €ì¥

3. 3D ë³€í™˜ ë°©ì‹
  - KITTI calibration matrixë¥¼ ì´ìš©í•œ ì—­íˆ¬ì˜(back-projection) ë°©ì‹ì„ ì±„íƒ.
  - Calibration file(P2, R0, Tr_velo2cam)ì—ì„œ focal length, principal point, baseline ì¶”ì¶œ:
    ğ‘¥=((ğ‘¢âˆ’ğ‘_ğ‘¥)â‹…ğ‘ / ğ‘“_ğ‘¥) +ğ‘_ğ‘¥
    ğ‘¦=((ğ‘£âˆ’ğ‘_ğ‘¦)â‹…ğ‘ / ğ‘“_ğ‘¦) +ğ‘_ğ‘¦
    ğ‘§=ğ‘
 â€‹ - ë³€í™˜ ì²´ì¸:
    (ğ‘¢,ğ‘£,ğ‘)â†’ project_image_to_rectâ†’ (ğ‘‹_ğ‘Ÿ,ğ‘Œ_ğ‘Ÿ,ğ‘_ğ‘Ÿ)â†’ ğ‘…_0â†’ (ğ‘‹_ğ‘Ÿğ‘’ğ‘“, ğ‘Œ_ğ‘Ÿğ‘’ğ‘“, ğ‘_ğ‘Ÿğ‘’ğ‘“)â†’ ğ‘‡ğ‘Ÿ_ğ‘£ğ‘’ğ‘™ğ‘œ2ğ‘ğ‘ğ‘šâ†’ (ğ‘‹_ğ‘£ğ‘’ğ‘™ğ‘œ, ğ‘Œ_ğ‘£ğ‘’ğ‘™ğ‘œ, ğ‘_ğ‘£ğ‘’ğ‘™ğ‘œ)

4. Python êµ¬í˜„:
   def project_image_to_rect(uv_depth, fx,fy,cx,cy, bx,by):
       x = ((uv_depth[:,0]-cx)*uv_depth[:,2]) / fx + bx
       y = ((uv_depth[:,1]-cy)*uv_depth[:,2]) / fy + by
       return np.stack([x,y,uv_depth[:,2]], axis=1)

   def project_image_to_velo(uv_depth, fx, fy, cx, cy, R0, v2c, bx, by):
       pts_rect = project_image_to_rect(uv_depth, fx,fy,cx,cy, bx,by)
       pts_ref  = R0 @ pts_rect.T
       pts_velo = np.dot(np.hstack([pts_ref.T, np.ones((pts_ref.shape[1],1))]), v2c.T)
       return pts_velo

    ì´ë¥¼ í†µí•´ NeRF ì—†ì´ RGB+depth â†’ 3D PCDë¥¼ ìƒì„±.

5. Segmentation ì ìš©
   - ë³€í™˜ëœ 3D point cloudì— Panoptic segmentation ì ìš©
   - {class : 3D coordinates} ë°˜í™˜
   - Boundary ë¬¸ì œ ë³´ì™„ ìœ„í•´ panoptic segmentation ê²°ê³¼ì™€ ë³‘í•©

6. ì¤‘ê°„ ì„±ê³¼
   - SAM ê²°ê³¼ë¥¼ color labelë¡œ ë§¤í•‘ ì™„ë£Œ
   - Single-view RGB + depth map â†’ 3D PCD ìƒì„± ë° LiDAR PCDì™€ ë¹„êµ ì™„ë£Œ
   - Panoptic segmentation ê²°ê³¼ê¹Œì§€ ê²°í•©í•˜ì—¬ {class : ì¢Œí‘œ} dictionary ìƒì„± ê°€ëŠ¥
   - Depth í’ˆì§ˆ ë¬¸ì œ, single-view boundary ë¬¸ì œ, occlusion ë¬¸ì œë¡œ ì¸í•œ ì •í™•ë„ í•œê³„ ì¡´ì¬

7. í–¥í›„ ê³„íš
   - Multi-view data ì ìš© ë° boundary ë¬¸ì œ ê°œì„ 
   - Panoptic segmentation ì„±ëŠ¥ í–¥ìƒì„ í†µí•œ final 3D labeling í’ˆì§ˆ ê°œì„  
   - ì •í™•ë„ ë¬¸ì œë¡œ ì¸í•œ ì¤‘ë‹¨

SAM-3D ë³€í™˜ ëª¨ë“ˆì„ cuboid ê¸°ë°˜ detectionê³¼ ì—°ê³„ í…ŒìŠ¤íŠ¸
