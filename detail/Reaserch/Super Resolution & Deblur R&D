프로젝트명: Super Resolution & Deblur R&D (OCR·품질 개선 목적)
기간/게시일:

1. 배경
   -1. 수집 데이터의 **저품질(블러·저해상도·잔상)**로 반려율이 높았고, 전처리 필터 기반 deblur는 이미지별 파라미터 의존이 커 자동화에 부적합.
   -2. 목표: SR/디블러 딥러닝으로 데이터 퀄리티 개선 → 나아가 OCR 정확도 향상 가능성 검증.

2. 이론·개념 정리 (2022.05.16)
   -1. SISR vs MISR: 단일/다중 저해상도 입력. MISR은 다중 관측으로 복원 제약을 줄여 유리.
   -2. Ill-posed 문제: LR 한 장에서 가능한 HR 해가 다수 → 예시 기반(external/internal) 제약 필요.
   -3. SRCNN 흐름 재정리: Patch 추출/표현 → 비선형 매핑 → 복원. DL 기반 SR의 출발점으로 포지셔닝.

3. 모델 후보 및 테스트 목록 (2022.05.09~06.02)
   -1. SR/복원: SwinIR, KAIR(USRNet/DPIR/BSRGAN 등), MPRNet, DeepRFT, PhysicsGAN, TATT, TextZoom 등.
   -2. Deblur: DeblurGAN, DeblurGANv2, NTIRE2019 계열.
   -3. Text 전용: text-image denoiser (U-Net base).

4. 실험 결과 요약 (2022.06.02 업데이트)
   -1. SwinIR (Best) 
       -1) 일반 이미지: 노이즈 감소 + 엣지 강화 효과 명확.
       -2) 잔상(afterimage): 잔상 부위는 개선 제한, 비잔상 영역 개선.
       -3) 텍스트 이미지: 일부 글자 획 손실/형태 변형(예: ‘ㅇ’→‘ㅁ’ 경향) 발생.
       -4) 속도: 1장 평균 4~7초 수준(설정·크기 의존).
       -5) OCR 평가(EasyOCR): 원본 대비 정확도 유의미 개선 없음.
   -2. Deblur 계열
       -1) DeblurGAN: 블러 영역 일부만 변화, 확대 시 품질 저하 관찰.
       -2) DeblurGANv2: 속도는 빠르나 출력은 원본과 큰 차이 없음(약간 밝아짐/위치 미세 변화).
       -3) 결론: 실효 개선 낮음.
   -3. Text-image denoiser
       -1) 번호판/한글 장문 테스트에서 결과 품질 미흡 → 자세한 수치 보고 생략.

5. SwinIR 학습 (2022.05.27 게시)
   -1. 데이터: AI Hub 한글 13K(공공문서/간판/포스터/흰바탕 텍스트).
   -2. 셋업: KAIR train_swinir_sr_realworld_x4_gan.json 기반 real-world x4 GAN 학습.
   -3. 진행: 약 385 epoch에서 일시 중단(리소스 제약). SwinIR 원저자 사례상 수십만~백만 step 장기 학습 필요.
   -4. 관찰: 중간 결과에서 denoise/edge 강화는 확인되나, 텍스트 획 변형으로 OCR 유의미 개선은 제한.

6. 한계·문제점
   -1. OCR 목적의 SR/디블러: 시각적 선명도↑가 인식률↑로 직결되지 않음.
   -2. 텍스트 도메인에서 획 손실·형태 변형이 빈번 → 오히려 오인식 유발.
   -3. 모션 블러·잔상은 GAN 기반 deblur 일반화가 어렵고, 원본 분포 미스매치 시 악화.
   -4. 추론 지연(수 초/장)로 대규모 배치/실시간 적용 부담.

7. 결론
   -1. SwinIR이 전반적 시각 품질은 가장 우수하나, OCR 성능 개선은 제한적.
   -2. Deblur 계열/텍스트 전용 denoiser는 현 시점 성능 이득 낮음.
   -3. 시각 개선 ≠ 인식 성능 개선: 목적에 맞는 도메인 특화 학습과 문자 보존 제약 없이는 한계.

8. 무엇을 알 수 있었는가 (Insights)
   -1. 목표 최적화의 중요성
       -1) “예쁜 이미지”를 만드는 SR보다, OCR 인식률을 높이는 SR이 필요.
       -2) 문자 획 보존(Topology/Stroke-aware) 을 명시적으로 제약하지 않으면, 시각 품질이 좋아져도 인식률은 그대로이거나 악화.
   -2. 도메인 특화 데이터가 핵심
       -1) 한글 텍스트(간판/문서/번호판 등) 에 최적화된 페어 데이터와 텍스트 중심 Loss(Char/Stroke/CTC-guided) 가 필요.
       -2) Real-world 분포 미스매치가 있을 경우 GAN 기반 deblur/SR이 왜곡을 유발.
   -3. 후처리·공동학습 전략
       -1) SR 단독 → OCR 미개선.
       -2) SR ⟷ OCR 공동학습 (Perceptual loss에 OCR feature/CTC loss 추가), Text-aware SR(TATT 등) + 문자 영역 마스크 활용이 유망.
   -4. 운영 관점 트레이드오프
       -1) 이미지 1장 수 초의 추론 지연은 대규모 파이프라인에 부담.
       -2) 선별 적용(품질 낮은 샘플만 SR/디블러) 또는 오프라인 전처리가 현실적.
   -5. 실패에서의 학습
       -1) DeblurGAN/v2, 일반 denoiser는 “보편적 향상” 을 주지 못함.
       -2) 텍스트 도메인에서는 문자 형태 보존이 품질의 본질임을 재확인.

9. 다음 액션 제안
   -1. Text-aware SR 재설계: 문자 영역 마스크 + stroke consistency loss + OCR feature loss.
   -2. 데이터: 한글 중심 LR-HR 페어 확충(간판/문서/번호판).
   -3. 평가: PSNR/SSIM 대신 OCR CER/WER 를 1차 메트릭으로 채택.
   -4. 배치 전략: 화질 점수 기반 선별 SR + 캐싱 파이프라인.
   
